\documentclass[a4paper,13pt]{book}
\usepackage[centertags]{amsmath}
\usepackage{amscd}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage[dvips]{graphics}
\usepackage{graphicx, subcaption} % takes care of graphic including machinery
\usepackage{multicol}
\usepackage{hyperref}
\usepackage[english]{babel}
\usepackage{color}
\usepackage{tikz}
\usepackage{tabls} %per tenir m{\'e}s control sobre l'espai en les taules nom{\'e}s cal aquest paquet
\usepackage{indentfirst} %per comen\c{c}ar primer parragraf de seccio o capitol amb indent
\usepackage{imakeidx}
\makeindex

\usepackage[T1]{fontenc}
\linespread{1.1} % Palatino needs more leading (space between lines)

\usepackage[latin1]{inputenc}
\usepackage[twoside,bindingoffset=1cm]{geometry}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% theorem environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newtheorem{defn0}{Definition}[chapter]
\newtheorem{prop0}[defn0]{Proposition}
\newtheorem{thm0}[defn0]{Theorem}
\newtheorem{lemma0}[defn0]{Lemma}
\newtheorem{corollary0}[defn0]{Corollary}
\newtheorem{example0}[defn0]{Example}
\newtheorem{remark0}[defn0]{Remark}
\newtheorem{conjecture0}[defn0]{Conjecture}

\newenvironment{definition}{ \begin{defn0}}{\end{defn0}}
\newenvironment{proposition}{\bigskip \begin{prop0}}{\end{prop0}}
\newenvironment{theorem}{\bigskip \begin{thm0}}{\end{thm0}}
\newenvironment{lemma}{\bigskip \begin{lemma0}}{\end{lemma0}}
\newenvironment{corollary}{\bigskip \begin{corollary0}}{\end{corollary0}}
\newenvironment{example}{ \begin{example0}\rm}{\end{example0}}
\newenvironment{remark}{ \begin{remark0}\rm}{\end{remark0}}
\newenvironment{conjecture}{\begin{conjecture0}}{\end{conjecture0}}

\newcommand{\defref}[1]{Definition~\ref{#1}}
\newcommand{\propref}[1]{Proposition~\ref{#1}}
\newcommand{\thmref}[1]{Theorem~\ref{#1}}
\newcommand{\lemref}[1]{Lemma~\ref{#1}}
\newcommand{\corref}[1]{Corollary~\ref{#1}}
\newcommand{\exref}[1]{Example~\ref{#1}}
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\remref}[1]{Remark~\ref{#1}}
\newcommand{\conjref}[1]{Conjecture~\ref{#1}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% local definitions for this paper
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% monomio
\newcommand{\mono}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{./pictures/monomio/monomio.pdf}}}\,}.}

% dominoes
\newcommand{\VD}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{./pictures/dominoes/v-domino.pdf}}}\,}i}
\newcommand{\HD}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{./pictures/dominoes/h-domino.pdf}}}\,}i}

% triminoes
\newcommand{\Itri}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{./pictures/trimonios/I3.pdf}}}\,}I}
\newcommand{\Ltri}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{./pictures/trimonios/L3.pdf}}}\,}L}


% tetrominoes
\newcommand{\OO}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/O.pdf}}}\,}O}
\newcommand{\TT}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/T.pdf}}}\,}T}
\newcommand{\LL}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/L_90.pdf}}}\,}L}
\newcommand{\LLvert}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/L.pdf}}}\,}L}
\newcommand{\JJ}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/J_90.pdf}}}\,}J}
\renewcommand{\SS}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/S.pdf}}}\,}S}
\newcommand{\ZZ}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/Z.pdf}}}\,}Z}
\newcommand{\II}{\texorpdfstring{\,\vcenter{\hbox{\includegraphics[scale=0.15]{pictures/tetrominos/I_90.pdf}}}\,}I}

\newcommand{\ALL}{\II, \allowbreak \OO, \allowbreak \TT, \allowbreak \SS, \allowbreak \ZZ, \allowbreak \JJ, \allowbreak \LL}


\NewDocumentCommand{\cell}{O{i} O{j}}{
 \langle #1, #2 \rangle
}
\NewDocumentCommand{\piece}{O{t} O{\theta} O{i} O{j} O{f}}{
 (#1, \allowbreak #2, \allowbreak \langle #3, \allowbreak #4 \rangle,  \allowbreak #5 )
}

\newcommand{\texttheo}[1]{\textnormal{\textsf{#1}}}
\newcommand{\tetris}[1]{\textsc{Tetris}[#1]\xspace}
\newcommand{\npc}{\textnormal{\textsf{NP-complete} }}
\newcommand{\pp}{\textnormal{\textsf{P}}}
\newcommand{\nph}{\textnormal{\textsf{NP-hard} }}
\newcommand{\survival}{$\texttheo{survival}$}
\newcommand{\clearing}{$\texttheo{clearing}$}


%%%%%%%%%%%%%%%%%%%%%% aixo pels headings %%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{} \fancyhead[LE,RO]{\bfseries\thepage}
\fancyhead[LO]{\bfseries\rightmark} \fancyhead[RE]{\bfseries\leftmark}

\def\paginaenblanc{\newpage%
\thispagestyle{empty}%
\vspace*{2cm}%
\newpage%
\thispagestyle{empty}%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% aux commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%==========================================================================
% macros to support private authors' notes
%==========================================================================
\newif\ifprivate
\privatetrue
\def\xbar{\vskip0.09in\hrule\vskip0.06in}
\def\private#1{\ifprivate \xbar {\em #1} \xbar
\else \fi}
\def\huh{\ifprivate ??? \marginpar{\Huge ???}
\else \fi}
\def\???{\ifprivate {\bf {???}} \marginpar{\begin{center}{\Huge {\bf ?}}\end{center}}
\else \fi}
%\def\???{\ifprivate {\bf {???}} \marginpar{{\Huge {\bf ?}}}
%\else \fi}
\marginparsep1mm
\def\nota#1{\ifprivate  $\clubsuit$ \marginpar{\parbox[t]{2.4cm}{\begin{center}\tiny #1\end{center}}}
\else \fi}
\def\comment#1{\ifprivate \marginpar{\parbox[t]{2.4cm}{\begin{center}\tiny #1\end{center}}}
\else \fi}
%\def\nota#1{\ifprivate  $\clubsuit$ \marginpar{\parbox[t]{1.8cm}{\tiny #1}}
%\else \fi}
\def\privateeject{\ifprivate\eject\fi}
%\def\???{{\bf {???}} \marginpar{{\Huge {\bf ?}}} }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%% definicions cap{\'\i}tol ""%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\av{\underline{a}}

\def\Zr{\mathbb Z^r} \def\Nr{\mathbb N^r}
\def\xv{\underline{x}}
\def\yv{\underline{y}}
\def\zv{\underline{z}}

\newcommand{\Proj}{\operatorname{Proj}}
\newcommand{\Spec}{\operatorname{Spec}}


\def\HiRIM#1{H^i_{\mathcal M}(#1)}

\newcommand{\im}{\operatorname{Im}}
\renewcommand{\ker}{\operatorname{Ker}}
\newcommand{\grade}{\operatorname{grade}}
\newcommand{\Ext}{\operatorname{Ext}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\m}{\mathfrak m}
\newcommand{\n}{\mathfrak n}
\newcommand{\M}{\mathfrak m}
%\newcommand{\cL}{{\mathcal L}}
\newcommand{\cP}{{\mathcal P}}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\cS}{{\mathcal S}}
\newcommand {\PP}{\mathbb{P}}

\def\p{\mathfrak{p}}
\def\q{\mathfrak{q}}
\DeclareMathOperator{\de}{deg}

\DeclareMathOperator{\Hl}{H}
 \DeclareMathOperator{\h}{h}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\makeatletter
\def\old@comma{,}
\catcode`\,=13
\def,{%
  \ifmmode%
    \old@comma\discretionary{}{}{}%
  \else%
    \old@comma%
  \fi%
}
\makeatother

\include{./definicions.tex}
\include{./variacions.tex}
\include{./results}

\include{./dominoes.tex}

\include{./related_problems.tex}



\bibliographystyle{plain}
\bibliography{references} 

\printindex
\end{document}
